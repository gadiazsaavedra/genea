"use strict";(self.webpackChunkgenea_client=self.webpackChunkgenea_client||[]).push([[516],{2516:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var i=t(5043),l=t(579);const s=e=>{let{person:a,onSubmit:t,onCancel:s}=e;const[n,r]=(0,i.useState)({fullName:(null===a||void 0===a?void 0:a.fullName)||"",birthDate:null!==a&&void 0!==a&&a.birthDate?new Date(a.birthDate).toISOString().split("T")[0]:"",birthPlace:(null===a||void 0===a?void 0:a.birthPlace)||"",isAlive:void 0===(null===a||void 0===a?void 0:a.isAlive)||a.isAlive,deathDate:null!==a&&void 0!==a&&a.deathDate?new Date(a.deathDate).toISOString().split("T")[0]:"",deathPlace:(null===a||void 0===a?void 0:a.deathPlace)||"",occupation:(null===a||void 0===a?void 0:a.occupation)||"",bio:(null===a||void 0===a?void 0:a.bio)||""}),[c,o]=(0,i.useState)({}),d=e=>{const{name:a,value:t,type:i,checked:l}=e.target;r({...n,[a]:"checkbox"===i?l:t})};return(0,l.jsxs)("form",{className:"person-form",onSubmit:e=>{e.preventDefault(),(()=>{const e={};return n.fullName.trim()||(e.fullName="El nombre es obligatorio"),n.isAlive||n.deathDate||(e.deathDate="La fecha de fallecimiento es obligatoria si la persona no est\xe1 viva"),o(e),0===Object.keys(e).length})()&&t(n)},children:[(0,l.jsx)("h2",{children:a?"Editar Persona":"A\xf1adir Persona"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"fullName",children:"Nombre completo *"}),(0,l.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:n.fullName,onChange:d,className:c.fullName?"error":""}),c.fullName&&(0,l.jsx)("span",{className:"error-message",children:c.fullName})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"birthDate",children:"Fecha de nacimiento"}),(0,l.jsx)("input",{type:"date",id:"birthDate",name:"birthDate",value:n.birthDate,onChange:d})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"birthPlace",children:"Lugar de nacimiento"}),(0,l.jsx)("input",{type:"text",id:"birthPlace",name:"birthPlace",value:n.birthPlace,onChange:d})]}),(0,l.jsxs)("div",{className:"form-group checkbox",children:[(0,l.jsx)("input",{type:"checkbox",id:"isAlive",name:"isAlive",checked:n.isAlive,onChange:d}),(0,l.jsx)("label",{htmlFor:"isAlive",children:"Est\xe1 vivo/a"})]}),!n.isAlive&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"deathDate",children:"Fecha de fallecimiento"}),(0,l.jsx)("input",{type:"date",id:"deathDate",name:"deathDate",value:n.deathDate,onChange:d,className:c.deathDate?"error":""}),c.deathDate&&(0,l.jsx)("span",{className:"error-message",children:c.deathDate})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"deathPlace",children:"Lugar de fallecimiento"}),(0,l.jsx)("input",{type:"text",id:"deathPlace",name:"deathPlace",value:n.deathPlace,onChange:d})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"occupation",children:"Ocupaci\xf3n"}),(0,l.jsx)("input",{type:"text",id:"occupation",name:"occupation",value:n.occupation,onChange:d})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"bio",children:"Biograf\xeda"}),(0,l.jsx)("textarea",{id:"bio",name:"bio",value:n.bio,onChange:d,rows:"4"})]}),(0,l.jsxs)("div",{className:"form-actions",children:[(0,l.jsx)("button",{type:"button",className:"cancel-button",onClick:s,children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",className:"submit-button",children:a?"Actualizar":"Crear"})]})]})},n=()=>{const[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),[r,c]=(0,i.useState)(!1),[o,d]=(0,i.useState)(null),[h,u]=(0,i.useState)(""),[m,b]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{setTimeout(()=>{const e=[{_id:"1",fullName:"Juan P\xe9rez",birthDate:"1950-05-15",birthPlace:"Madrid, Espa\xf1a",isAlive:!0,occupation:"Ingeniero (jubilado)"},{_id:"2",fullName:"Mar\xeda P\xe9rez",birthDate:"1975-08-20",birthPlace:"Barcelona, Espa\xf1a",isAlive:!0,occupation:"M\xe9dico"},{_id:"3",fullName:"Pedro P\xe9rez",birthDate:"1978-12-03",birthPlace:"Valencia, Espa\xf1a",isAlive:!0,occupation:"Abogado"},{_id:"4",fullName:"Carlos G\xf3mez",birthDate:"2000-03-10",birthPlace:"Madrid, Espa\xf1a",isAlive:!0,occupation:"Estudiante"},{_id:"5",fullName:"Laura G\xf3mez",birthDate:"2002-11-05",birthPlace:"Madrid, Espa\xf1a",isAlive:!0,occupation:"Estudiante"}];a(e),b(e),n(!1)},600)}catch(e){console.error("Error al cargar personas:",e),n(!1)}})()},[]),(0,i.useEffect)(()=>{if(h){const a=e.filter(e=>e.fullName.toLowerCase().includes(h.toLowerCase()));b(a)}else b(e)},[h,e]);return(0,l.jsxs)("div",{className:"person-management-container",children:[(0,l.jsxs)("div",{className:"person-management-header",children:[(0,l.jsx)("h1",{children:"Gesti\xf3n de Personas"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>{d(null),c(!0)},children:"A\xf1adir Persona"})]}),(0,l.jsx)("div",{className:"search-bar",children:(0,l.jsx)("input",{type:"text",placeholder:"Buscar persona...",value:h,onChange:e=>u(e.target.value)})}),t?(0,l.jsx)("div",{className:"loading",children:"Cargando personas..."}):(0,l.jsx)("div",{className:"persons-table-container",children:(0,l.jsxs)("table",{className:"persons-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Nombre"}),(0,l.jsx)("th",{children:"Fecha de nacimiento"}),(0,l.jsx)("th",{children:"Lugar de nacimiento"}),(0,l.jsx)("th",{children:"Estado"}),(0,l.jsx)("th",{children:"Ocupaci\xf3n"}),(0,l.jsx)("th",{children:"Acciones"})]})}),(0,l.jsx)("tbody",{children:m.length>0?m.map(t=>{return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:t.fullName}),(0,l.jsx)("td",{children:(i=t.birthDate,i?new Date(i).toLocaleDateString():"Desconocida")}),(0,l.jsx)("td",{children:t.birthPlace||"Desconocido"}),(0,l.jsx)("td",{children:t.isAlive?"Vivo":"Fallecido"}),(0,l.jsx)("td",{children:t.occupation||"Desconocida"}),(0,l.jsxs)("td",{className:"actions-cell",children:[(0,l.jsx)("button",{className:"action-btn view-btn",title:"Ver detalles",onClick:()=>{},children:"\ud83d\udc41\ufe0f"}),(0,l.jsx)("button",{className:"action-btn edit-btn",title:"Editar",onClick:()=>(e=>{d(e),c(!0)})(t),children:"\u270f\ufe0f"}),(0,l.jsx)("button",{className:"action-btn delete-btn",title:"Eliminar",onClick:()=>(async t=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta persona?"))try{a(e.filter(e=>e._id!==t)),b(m.filter(e=>e._id!==t))}catch(i){console.error("Error al eliminar persona:",i)}})(t._id),children:"\ud83d\uddd1\ufe0f"})]})]},t._id);var i}):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"6",className:"no-results",children:"No se encontraron personas"})})})]})}),r&&(0,l.jsx)("div",{className:"modal-overlay",children:(0,l.jsx)("div",{className:"modal-content",children:(0,l.jsx)(s,{person:o,onSubmit:async t=>{try{if(o){const i=e.map(e=>e._id===o._id?{...e,...t}:e);a(i),b(i)}else{const i={_id:Date.now().toString(),...t};a([...e,i]),b([...m,i])}c(!1)}catch(i){console.error("Error al guardar persona:",i)}},onCancel:()=>{c(!1)}})})})]})}}}]);
//# sourceMappingURL=516.ccfe63c3.chunk.js.map