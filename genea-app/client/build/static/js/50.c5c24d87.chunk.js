"use strict";(self.webpackChunkgenea_client=self.webpackChunkgenea_client||[]).push([[50],{9050:(e,a,i)=>{i.r(a),i.d(a,{default:()=>t});var s=i(5043),n=i(5475),r=i(579);const t=()=>{const[e,a]=(0,s.useState)([]),[i,t]=(0,s.useState)(!0),[l,c]=(0,s.useState)(!1),[m,d]=(0,s.useState)(null),[o,h]=(0,s.useState)({name:"",description:""});(0,s.useEffect)(()=>{(async()=>{try{setTimeout(()=>{a([{_id:"1",name:"Familia P\xe9rez",description:"Familia originaria de Madrid",membersCount:12,createdAt:"2023-01-15",isAdmin:!0},{_id:"2",name:"Familia Garc\xeda",description:"Rama familiar de Barcelona",membersCount:8,createdAt:"2023-02-20",isAdmin:!0},{_id:"3",name:"Familia L\xf3pez",description:"Familia extendida con ra\xedces en Valencia",membersCount:15,createdAt:"2023-03-05",isAdmin:!1}]),t(!1)},600)}catch(e){console.error("Error al cargar familias:",e),t(!1)}})()},[]);const u=()=>{d(null),h({name:"",description:""}),c(!0)},b=e=>{const{name:a,value:i}=e.target;h({...o,[a]:i})};return(0,r.jsxs)("div",{className:"family-management-container",children:[(0,r.jsxs)("div",{className:"family-management-header",children:[(0,r.jsx)("h1",{children:"Mis Familias"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:u,children:"Crear Nueva Familia"})]}),i?(0,r.jsx)("div",{className:"loading",children:"Cargando familias..."}):(0,r.jsx)("div",{className:"families-grid",children:e.length>0?e.map(i=>{return(0,r.jsxs)("div",{className:"family-card",children:[(0,r.jsxs)("div",{className:"family-card-header",children:[(0,r.jsx)("h2",{children:i.name}),i.isAdmin&&(0,r.jsx)("span",{className:"admin-badge",children:"Admin"})]}),(0,r.jsx)("p",{className:"family-description",children:i.description}),(0,r.jsxs)("div",{className:"family-meta",children:[(0,r.jsxs)("span",{children:[i.membersCount," miembros"]}),(0,r.jsxs)("span",{children:["Creada: ",(s=i.createdAt,new Date(s).toLocaleDateString())]})]}),(0,r.jsxs)("div",{className:"family-actions",children:[(0,r.jsx)(n.N_,{to:`/family/${i._id}/tree`,className:"btn btn-sm",children:"Ver \xe1rbol"}),(0,r.jsx)(n.N_,{to:`/family/${i._id}/members`,className:"btn btn-sm btn-outline",children:"Miembros"}),i.isAdmin&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"btn btn-sm btn-outline",onClick:()=>(e=>{d(e),h({name:e.name,description:e.description}),c(!0)})(i),children:"Editar"}),(0,r.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>(async i=>{if(window.confirm("\xbfEst\xe1s seguro de que deseas eliminar esta familia? Esta acci\xf3n no se puede deshacer."))try{a(e.filter(e=>e._id!==i))}catch(s){console.error("Error al eliminar familia:",s)}})(i._id),children:"Eliminar"})]})]})]},i._id);var s}):(0,r.jsxs)("div",{className:"no-families",children:[(0,r.jsx)("p",{children:"No tienes familias creadas"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:u,children:"Crear tu primera familia"})]})}),l&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsx)("div",{className:"modal-content",children:(0,r.jsxs)("div",{className:"family-form",children:[(0,r.jsx)("h2",{children:m?"Editar Familia":"Crear Nueva Familia"}),(0,r.jsxs)("form",{onSubmit:async i=>{i.preventDefault();try{if(m){const i=e.map(e=>e._id===m._id?{...e,...o}:e);a(i)}else{const i={_id:Date.now().toString(),...o,membersCount:1,createdAt:(new Date).toISOString().split("T")[0],isAdmin:!0};a([...e,i])}c(!1)}catch(s){console.error("Error al guardar familia:",s)}},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"name",children:"Nombre de la familia *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:b,required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:b,rows:"4"})]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-cancel",onClick:()=>c(!1),children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:m?"Actualizar":"Crear"})]})]})]})})})]})}}}]);
//# sourceMappingURL=50.c5c24d87.chunk.js.map